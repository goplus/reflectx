//go:build go1.18
// +build go1.18

// Copyright 2012 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

#include "textflag.h"
#include "funcdata.h"
#include "go_asm.h"

// The frames of each of the two functions below contain two locals, at offsets
// that are known to the runtime.
//
// The first local is a bool called retValid with a whole pointer-word reserved
// for it on the stack. The purpose of this word is so that the runtime knows
// whether the stack-allocated return space contains valid values for stack
// scanning.
//
// The second local is an abi.RegArgs value whose offset is also known to the
// runtime, so that a stack map for it can be constructed, since it contains
// pointers visible to the GC.
#define LOCAL_RETVALID 32
#define LOCAL_REGARGS 40

// spillArgs stores return values from registers to a *internal/abi.RegArgs in R12.
TEXT ·spillArgs(SB),NOSPLIT,$0-0
	MOVQ AX, 0(R12)
	MOVQ BX, 8(R12)
	MOVQ CX, 16(R12)
	MOVQ DI, 24(R12)
	MOVQ SI, 32(R12)
	MOVQ R8, 40(R12)
	MOVQ R9, 48(R12)
	MOVQ R10, 56(R12)
	MOVQ R11, 64(R12)
	MOVQ X0, 72(R12)
	MOVQ X1, 80(R12)
	MOVQ X2, 88(R12)
	MOVQ X3, 96(R12)
	MOVQ X4, 104(R12)
	MOVQ X5, 112(R12)
	MOVQ X6, 120(R12)
	MOVQ X7, 128(R12)
	MOVQ X8, 136(R12)
	MOVQ X9, 144(R12)
	MOVQ X10, 152(R12)
	MOVQ X11, 160(R12)
	MOVQ X12, 168(R12)
	MOVQ X13, 176(R12)
	MOVQ X14, 184(R12)
	RET

// unspillArgs loads args into registers from a *internal/abi.RegArgs in R12.
TEXT ·unspillArgs(SB),NOSPLIT,$0-0
	MOVQ 0(R12), AX
	MOVQ 8(R12), BX
	MOVQ 16(R12), CX
	MOVQ 24(R12), DI
	MOVQ 32(R12), SI
	MOVQ 40(R12), R8
	MOVQ 48(R12), R9
	MOVQ 56(R12), R10
	MOVQ 64(R12), R11
	MOVQ 72(R12), X0
	MOVQ 80(R12), X1
	MOVQ 88(R12), X2
	MOVQ 96(R12), X3
	MOVQ 104(R12), X4
	MOVQ 112(R12), X5
	MOVQ 120(R12), X6
	MOVQ 128(R12), X7
	MOVQ 136(R12), X8
	MOVQ 144(R12), X9
	MOVQ 152(R12), X10
	MOVQ 160(R12), X11
	MOVQ 168(R12), X12
	MOVQ 176(R12), X13
	MOVQ 184(R12), X14
	RET

// makeFuncStub is the code half of the function returned by MakeFunc.
// See the comment on the declaration of makeFuncStub in makefunc.go
// for more details.
// No arg size here; runtime pulls arg map out of the func value.
// This frame contains two locals. See the comment above LOCAL_RETVALID.
#define MAKE_FUNC_FN(NAME,FNCALL)		\
TEXT NAME(SB),(NOSPLIT|WRAPPER),$312		\
	NO_LOCAL_POINTERS		\
	LEAQ	LOCAL_REGARGS(SP), R12		\
	CALL	·spillArgs(SB)		\
	MOVQ	24(SP), DX		\
	MOVQ	DX, 0(SP)		\
	LEAQ	argframe+0(FP), CX		\
	MOVQ	CX, 8(SP)		\
	MOVB	$0, LOCAL_RETVALID(SP)		\
	LEAQ	LOCAL_RETVALID(SP), AX		\
	MOVQ	AX, 16(SP)		\
	LEAQ	LOCAL_REGARGS(SP), AX		\
	MOVQ	AX, 24(SP)		\
	CALL	FNCALL(SB)		\
	LEAQ	LOCAL_REGARGS(SP), R12		\
	CALL	·unspillArgs(SB)		\
	RET
MAKE_FUNC_FN(·f0,·x0)
MAKE_FUNC_FN(·f1,·x1)
MAKE_FUNC_FN(·f2,·x2)
MAKE_FUNC_FN(·f3,·x3)
MAKE_FUNC_FN(·f4,·x4)
MAKE_FUNC_FN(·f5,·x5)
MAKE_FUNC_FN(·f6,·x6)
MAKE_FUNC_FN(·f7,·x7)
MAKE_FUNC_FN(·f8,·x8)
MAKE_FUNC_FN(·f9,·x9)
MAKE_FUNC_FN(·f10,·x10)
MAKE_FUNC_FN(·f11,·x11)
MAKE_FUNC_FN(·f12,·x12)
MAKE_FUNC_FN(·f13,·x13)
MAKE_FUNC_FN(·f14,·x14)
MAKE_FUNC_FN(·f15,·x15)
MAKE_FUNC_FN(·f16,·x16)
MAKE_FUNC_FN(·f17,·x17)
MAKE_FUNC_FN(·f18,·x18)
MAKE_FUNC_FN(·f19,·x19)
MAKE_FUNC_FN(·f20,·x20)
MAKE_FUNC_FN(·f21,·x21)
MAKE_FUNC_FN(·f22,·x22)
MAKE_FUNC_FN(·f23,·x23)
MAKE_FUNC_FN(·f24,·x24)
MAKE_FUNC_FN(·f25,·x25)
MAKE_FUNC_FN(·f26,·x26)
MAKE_FUNC_FN(·f27,·x27)
MAKE_FUNC_FN(·f28,·x28)
MAKE_FUNC_FN(·f29,·x29)
MAKE_FUNC_FN(·f30,·x30)
MAKE_FUNC_FN(·f31,·x31)
MAKE_FUNC_FN(·f32,·x32)
MAKE_FUNC_FN(·f33,·x33)
MAKE_FUNC_FN(·f34,·x34)
MAKE_FUNC_FN(·f35,·x35)
MAKE_FUNC_FN(·f36,·x36)
MAKE_FUNC_FN(·f37,·x37)
MAKE_FUNC_FN(·f38,·x38)
MAKE_FUNC_FN(·f39,·x39)
MAKE_FUNC_FN(·f40,·x40)
MAKE_FUNC_FN(·f41,·x41)
MAKE_FUNC_FN(·f42,·x42)
MAKE_FUNC_FN(·f43,·x43)
MAKE_FUNC_FN(·f44,·x44)
MAKE_FUNC_FN(·f45,·x45)
MAKE_FUNC_FN(·f46,·x46)
MAKE_FUNC_FN(·f47,·x47)
MAKE_FUNC_FN(·f48,·x48)
MAKE_FUNC_FN(·f49,·x49)
MAKE_FUNC_FN(·f50,·x50)
MAKE_FUNC_FN(·f51,·x51)
MAKE_FUNC_FN(·f52,·x52)
MAKE_FUNC_FN(·f53,·x53)
MAKE_FUNC_FN(·f54,·x54)
MAKE_FUNC_FN(·f55,·x55)
MAKE_FUNC_FN(·f56,·x56)
MAKE_FUNC_FN(·f57,·x57)
MAKE_FUNC_FN(·f58,·x58)
MAKE_FUNC_FN(·f59,·x59)
MAKE_FUNC_FN(·f60,·x60)
MAKE_FUNC_FN(·f61,·x61)
MAKE_FUNC_FN(·f62,·x62)
MAKE_FUNC_FN(·f63,·x63)
MAKE_FUNC_FN(·f64,·x64)
MAKE_FUNC_FN(·f65,·x65)
MAKE_FUNC_FN(·f66,·x66)
MAKE_FUNC_FN(·f67,·x67)
MAKE_FUNC_FN(·f68,·x68)
MAKE_FUNC_FN(·f69,·x69)
MAKE_FUNC_FN(·f70,·x70)
MAKE_FUNC_FN(·f71,·x71)
MAKE_FUNC_FN(·f72,·x72)
MAKE_FUNC_FN(·f73,·x73)
MAKE_FUNC_FN(·f74,·x74)
MAKE_FUNC_FN(·f75,·x75)
MAKE_FUNC_FN(·f76,·x76)
MAKE_FUNC_FN(·f77,·x77)
MAKE_FUNC_FN(·f78,·x78)
MAKE_FUNC_FN(·f79,·x79)
MAKE_FUNC_FN(·f80,·x80)
MAKE_FUNC_FN(·f81,·x81)
MAKE_FUNC_FN(·f82,·x82)
MAKE_FUNC_FN(·f83,·x83)
MAKE_FUNC_FN(·f84,·x84)
MAKE_FUNC_FN(·f85,·x85)
MAKE_FUNC_FN(·f86,·x86)
MAKE_FUNC_FN(·f87,·x87)
MAKE_FUNC_FN(·f88,·x88)
MAKE_FUNC_FN(·f89,·x89)
MAKE_FUNC_FN(·f90,·x90)
MAKE_FUNC_FN(·f91,·x91)
MAKE_FUNC_FN(·f92,·x92)
MAKE_FUNC_FN(·f93,·x93)
MAKE_FUNC_FN(·f94,·x94)
MAKE_FUNC_FN(·f95,·x95)
MAKE_FUNC_FN(·f96,·x96)
MAKE_FUNC_FN(·f97,·x97)
MAKE_FUNC_FN(·f98,·x98)
MAKE_FUNC_FN(·f99,·x99)
MAKE_FUNC_FN(·f100,·x100)
MAKE_FUNC_FN(·f101,·x101)
MAKE_FUNC_FN(·f102,·x102)
MAKE_FUNC_FN(·f103,·x103)
MAKE_FUNC_FN(·f104,·x104)
MAKE_FUNC_FN(·f105,·x105)
MAKE_FUNC_FN(·f106,·x106)
MAKE_FUNC_FN(·f107,·x107)
MAKE_FUNC_FN(·f108,·x108)
MAKE_FUNC_FN(·f109,·x109)
MAKE_FUNC_FN(·f110,·x110)
MAKE_FUNC_FN(·f111,·x111)
MAKE_FUNC_FN(·f112,·x112)
MAKE_FUNC_FN(·f113,·x113)
MAKE_FUNC_FN(·f114,·x114)
MAKE_FUNC_FN(·f115,·x115)
MAKE_FUNC_FN(·f116,·x116)
MAKE_FUNC_FN(·f117,·x117)
MAKE_FUNC_FN(·f118,·x118)
MAKE_FUNC_FN(·f119,·x119)
MAKE_FUNC_FN(·f120,·x120)
MAKE_FUNC_FN(·f121,·x121)
MAKE_FUNC_FN(·f122,·x122)
MAKE_FUNC_FN(·f123,·x123)
MAKE_FUNC_FN(·f124,·x124)
MAKE_FUNC_FN(·f125,·x125)
MAKE_FUNC_FN(·f126,·x126)
MAKE_FUNC_FN(·f127,·x127)
MAKE_FUNC_FN(·f128,·x128)
MAKE_FUNC_FN(·f129,·x129)
MAKE_FUNC_FN(·f130,·x130)
MAKE_FUNC_FN(·f131,·x131)
MAKE_FUNC_FN(·f132,·x132)
MAKE_FUNC_FN(·f133,·x133)
MAKE_FUNC_FN(·f134,·x134)
MAKE_FUNC_FN(·f135,·x135)
MAKE_FUNC_FN(·f136,·x136)
MAKE_FUNC_FN(·f137,·x137)
MAKE_FUNC_FN(·f138,·x138)
MAKE_FUNC_FN(·f139,·x139)
MAKE_FUNC_FN(·f140,·x140)
MAKE_FUNC_FN(·f141,·x141)
MAKE_FUNC_FN(·f142,·x142)
MAKE_FUNC_FN(·f143,·x143)
MAKE_FUNC_FN(·f144,·x144)
MAKE_FUNC_FN(·f145,·x145)
MAKE_FUNC_FN(·f146,·x146)
MAKE_FUNC_FN(·f147,·x147)
MAKE_FUNC_FN(·f148,·x148)
MAKE_FUNC_FN(·f149,·x149)
MAKE_FUNC_FN(·f150,·x150)
MAKE_FUNC_FN(·f151,·x151)
MAKE_FUNC_FN(·f152,·x152)
MAKE_FUNC_FN(·f153,·x153)
MAKE_FUNC_FN(·f154,·x154)
MAKE_FUNC_FN(·f155,·x155)
MAKE_FUNC_FN(·f156,·x156)
MAKE_FUNC_FN(·f157,·x157)
MAKE_FUNC_FN(·f158,·x158)
MAKE_FUNC_FN(·f159,·x159)
MAKE_FUNC_FN(·f160,·x160)
MAKE_FUNC_FN(·f161,·x161)
MAKE_FUNC_FN(·f162,·x162)
MAKE_FUNC_FN(·f163,·x163)
MAKE_FUNC_FN(·f164,·x164)
MAKE_FUNC_FN(·f165,·x165)
MAKE_FUNC_FN(·f166,·x166)
MAKE_FUNC_FN(·f167,·x167)
MAKE_FUNC_FN(·f168,·x168)
MAKE_FUNC_FN(·f169,·x169)
MAKE_FUNC_FN(·f170,·x170)
MAKE_FUNC_FN(·f171,·x171)
MAKE_FUNC_FN(·f172,·x172)
MAKE_FUNC_FN(·f173,·x173)
MAKE_FUNC_FN(·f174,·x174)
MAKE_FUNC_FN(·f175,·x175)
MAKE_FUNC_FN(·f176,·x176)
MAKE_FUNC_FN(·f177,·x177)
MAKE_FUNC_FN(·f178,·x178)
MAKE_FUNC_FN(·f179,·x179)
MAKE_FUNC_FN(·f180,·x180)
MAKE_FUNC_FN(·f181,·x181)
MAKE_FUNC_FN(·f182,·x182)
MAKE_FUNC_FN(·f183,·x183)
MAKE_FUNC_FN(·f184,·x184)
MAKE_FUNC_FN(·f185,·x185)
MAKE_FUNC_FN(·f186,·x186)
MAKE_FUNC_FN(·f187,·x187)
MAKE_FUNC_FN(·f188,·x188)
MAKE_FUNC_FN(·f189,·x189)
MAKE_FUNC_FN(·f190,·x190)
MAKE_FUNC_FN(·f191,·x191)
MAKE_FUNC_FN(·f192,·x192)
MAKE_FUNC_FN(·f193,·x193)
MAKE_FUNC_FN(·f194,·x194)
MAKE_FUNC_FN(·f195,·x195)
MAKE_FUNC_FN(·f196,·x196)
MAKE_FUNC_FN(·f197,·x197)
MAKE_FUNC_FN(·f198,·x198)
MAKE_FUNC_FN(·f199,·x199)
MAKE_FUNC_FN(·f200,·x200)
MAKE_FUNC_FN(·f201,·x201)
MAKE_FUNC_FN(·f202,·x202)
MAKE_FUNC_FN(·f203,·x203)
MAKE_FUNC_FN(·f204,·x204)
MAKE_FUNC_FN(·f205,·x205)
MAKE_FUNC_FN(·f206,·x206)
MAKE_FUNC_FN(·f207,·x207)
MAKE_FUNC_FN(·f208,·x208)
MAKE_FUNC_FN(·f209,·x209)
MAKE_FUNC_FN(·f210,·x210)
MAKE_FUNC_FN(·f211,·x211)
MAKE_FUNC_FN(·f212,·x212)
MAKE_FUNC_FN(·f213,·x213)
MAKE_FUNC_FN(·f214,·x214)
MAKE_FUNC_FN(·f215,·x215)
MAKE_FUNC_FN(·f216,·x216)
MAKE_FUNC_FN(·f217,·x217)
MAKE_FUNC_FN(·f218,·x218)
MAKE_FUNC_FN(·f219,·x219)
MAKE_FUNC_FN(·f220,·x220)
MAKE_FUNC_FN(·f221,·x221)
MAKE_FUNC_FN(·f222,·x222)
MAKE_FUNC_FN(·f223,·x223)
MAKE_FUNC_FN(·f224,·x224)
MAKE_FUNC_FN(·f225,·x225)
MAKE_FUNC_FN(·f226,·x226)
MAKE_FUNC_FN(·f227,·x227)
MAKE_FUNC_FN(·f228,·x228)
MAKE_FUNC_FN(·f229,·x229)
MAKE_FUNC_FN(·f230,·x230)
MAKE_FUNC_FN(·f231,·x231)
MAKE_FUNC_FN(·f232,·x232)
MAKE_FUNC_FN(·f233,·x233)
MAKE_FUNC_FN(·f234,·x234)
MAKE_FUNC_FN(·f235,·x235)
MAKE_FUNC_FN(·f236,·x236)
MAKE_FUNC_FN(·f237,·x237)
MAKE_FUNC_FN(·f238,·x238)
MAKE_FUNC_FN(·f239,·x239)
MAKE_FUNC_FN(·f240,·x240)
MAKE_FUNC_FN(·f241,·x241)
MAKE_FUNC_FN(·f242,·x242)
MAKE_FUNC_FN(·f243,·x243)
MAKE_FUNC_FN(·f244,·x244)
MAKE_FUNC_FN(·f245,·x245)
MAKE_FUNC_FN(·f246,·x246)
MAKE_FUNC_FN(·f247,·x247)
MAKE_FUNC_FN(·f248,·x248)
MAKE_FUNC_FN(·f249,·x249)
MAKE_FUNC_FN(·f250,·x250)
MAKE_FUNC_FN(·f251,·x251)
MAKE_FUNC_FN(·f252,·x252)
MAKE_FUNC_FN(·f253,·x253)
MAKE_FUNC_FN(·f254,·x254)
MAKE_FUNC_FN(·f255,·x255)
